name: Main ReadMe Updater

on:
  push:
    branches:
      - main
  schedule:
    - cron: '0 */12 * * *' # '*' = INCLUDE ALL VALUE (('* * * * *') = jalan setiap menit..)
#            â”‚  â”‚   â”‚ â”‚ â”‚  #  NB = '*/n' = every n | 'n,n' = multi value | 'n-n' = rentang
#            â”‚  â”‚   â”‚ â”‚ â”” Hari dalam minggu (0-6, Minggu = 0)
#            â”‚  â”‚   â”‚ â””â”€â”€ Bulan (1-12)
#            â”‚  â”‚   â””â”€â”€â”€â”€ Hari dalam bulan (1-31)
#            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€ Jam (0-59)
#            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Menit (0-59)
  workflow_dispatch:
  
permissions:
  contents: write  

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ Fetch repo
        uses: actions/checkout@master
        with:
          fetch-depth: 1
      - name: âœ¨ Create ReadMe.md
        run: |
          cd ${GITHUB_WORKSPACE}/
          npm i
          node src/update.js
      - name: ğŸš€ Deploy
        run: |
          git config --global user.name "${{ secrets.USERNAME }}"
          git config --global user.email "${{ secrets.EMAIL_ADDRESS }}"
          git add .
          git commit -am "[Automatic] Updated ReadMe.md 
        
          Co-authored-by: ${{ secrets.CO_USERNAME }} <${{ secrets.CO_AUTHOR }}@gmail.com>"
          git push --all -f https://${{ secrets.MY_PAT }}@github.com/${GITHUB_REPOSITORY}.git
